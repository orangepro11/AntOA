(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1aeca938"],{"6f4c":function(e,t,o){"use strict";o("e63a")},d995:function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-card",[null!=e.api?o("a-form",[e._l(e.columns,(function(t,r){return["COLUMN_DISPLAY"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[o("div",{domProps:{innerHTML:e._s(t.extra)}})]):e._e(),"COLUMN_TEXT"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[o("a-input",{attrs:{placeholder:"请填写"+t.tip},model:{value:e.form[t.col],callback:function(o){e.$set(e.form,t.col,o)},expression:"form[column.col]"}})],1):e._e(),"COLUMN_TEXTAREA"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[o("a-textarea",{attrs:{placeholder:"请填写"+t.tip,rows:"20","allow-clear":""},model:{value:e.form[t.col],callback:function(o){e.$set(e.form,t.col,o)},expression:"form[column.col]"}})],1):e._e(),"COLUMN_PASSWORD"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[o("a-input-password",{attrs:{placeholder:"请填写"+t.tip+"，不修改密码则请留空"},model:{value:e.form[t.col],callback:function(o){e.$set(e.form,t.col,o)},expression:"form[column.col]"}})],1):e._e(),"COLUMN_RADIO"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[o("a-radio-group",{on:{change:function(t){return e.$forceUpdate()}},model:{value:e.form[t.col],callback:function(o){e.$set(e.form,t.col,o)},expression:"form[column.col]"}},e._l(t.extra,(function(t,r){return o("a-radio",{key:r+"",attrs:{value:r+""}},[e._v(" "+e._s(t)+" ")])})),1)],1):e._e(),"COLUMN_SELECT"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[o("a-select",{model:{value:e.form[t.col],callback:function(o){e.$set(e.form,t.col,o)},expression:"form[column.col]"}},e._l(t.extra,(function(t,r){return o("a-select-option",{key:r+"",attrs:{value:r+""}},[e._v(" "+e._s(t)+" ")])})),1)],1):e._e(),"COLUMN_CHECKBOX"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[o("a-checkbox-group",{on:{change:function(t){return e.$forceUpdate()}},model:{value:e.form[t.col],callback:function(o){e.$set(e.form,t.col,o)},expression:"form[column.col]"}},e._l(t.extra,(function(t,r){return o("a-checkbox",{key:r,attrs:{value:r}},[e._v(" "+e._s(t)+" ")])})),1)],1):e._e(),"COLUMN_TIMESTAMP"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[o("a-date-picker",{attrs:{"show-time":"",format:"YYYY-MM-DD HH:mm:ss",placeholder:"请选择"+t.tip},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.form[t.col],callback:function(o){e.$set(e.form,t.col,o)},expression:"form[column.col]"}})],1):e._e(),"COLUMN_RICHTEXT"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[o("wang-editor",{attrs:{id:e.form[t.col]},model:{value:e.form[t.col],callback:function(o){e.$set(e.form,t.col,o)},expression:"form[column.col]"}})],1):e._e(),"COLUMN_PICTURE"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[""!=e.form[t.col]?o("img",{staticStyle:{width:"200px"},attrs:{src:e.form[t.col]}}):e._e(),""!=e.form[t.col]?o("a-button",{attrs:{type:"danger"},on:{click:function(o){e.form[t.col]=""}}},[e._v("删除 ")]):e._e(),o("upload-button",{attrs:{accept:"image/*",multiple:!1},on:{uploadfinished:function(o){e.form[t.col]=o[0].response}}})],1):e._e(),"COLUMN_FILE"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[""!=e.form[t.col]?o("a-button",{attrs:{type:"primary"},on:{click:function(o){return e.openurl(e.form[t.col])}}},[e._v("下载 ")]):e._e(),""!=e.form[t.col]?o("a-button",{attrs:{type:"danger"},on:{click:function(o){e.form[t.col]=""}}},[e._v("删除 ")]):e._e(),o("upload-button",{attrs:{accept:"*/*",multiple:!1},on:{uploadfinished:function(o){e.form[t.col]=o[0].response}}})],1):e._e(),"COLUMN_PICTURES"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[e._l(e.form[t.col],(function(r,a){return o("div",{key:a},[o("img",{staticStyle:{width:"200px"},attrs:{src:r}}),o("a-button",{attrs:{type:"danger"},on:{click:function(o){e.form[t.col]=e.form[t.col].filter((function(e){return e!=r}))}}},[e._v(" 删除 ")])],1)})),o("upload-button",{attrs:{accept:"image/*",multiple:!0},on:{uploadfinished:function(o){e.form[t.col]=e.form[t.col].concat(o.map((function(e){return e.response})))}}})],2):e._e(),"COLUMN_FILES"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[e._l(e.form[t.col],(function(r,a){return o("div",{key:a},[o("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.openurl(r)}}},[e._v("下载")]),o("a-button",{attrs:{type:"danger"},on:{click:function(o){e.form[t.col]=e.form[t.col].filter((function(e){return e!=r}))}}},[e._v(" 删除 ")])],1)})),o("upload-button",{attrs:{accept:"*/*",multiple:!0},on:{uploadfinished:function(o){e.form[t.col]=e.form[t.col].concat(o.map((function(e){return e.response})))}}})],2):e._e(),"COLUMN_CHOOSE"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[o("a-cascader",{attrs:{placeholder:"请选择"+t.tip,options:t.extra},model:{value:e.form[t.col],callback:function(o){e.$set(e.form,t.col,o)},expression:"form[column.col]"}})],1):e._e(),"COLUMN_CHILDREN_CHOOSE"==t.type?o("a-form-item",{attrs:{label:t.tip,"label-col":{span:7},"wrapper-col":{span:10}}},[void 0!==e.formTip[t.col]?o("column-children-choose",{attrs:{tip:e.formTip[t.col],column:t,api:e.api,pagetype:"edit"},on:{"update:tip":function(o){return e.$set(e.formTip,t.col,o)}},model:{value:e.form[t.col],callback:function(o){e.$set(e.form,t.col,o)},expression:"form[column.col]"}}):e._e()],1):e._e()]})),o("a-form-item",{staticStyle:{display:"flex","justify-content":"center"}},[o("a-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("修改")]),o("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.reset}},[e._v("重置")])],1)],2):e._e(),o("confirm-dialog",{ref:"confirmDialog"})],1)},a=[],l=o("1da1"),n=(o("96cf"),o("d81d"),o("2ca0"),o("caad"),o("2532"),o("ac1f"),o("1276"),o("8a79"),o("c1df")),c=o.n(n),s=o("3521"),i=o("129a"),p=o("ba8c"),u=o("31ce"),m=o("4160"),f={data:function(){return{id:null,columns:null,form:null,formTip:null,api:null}},components:{ConfirmDialog:i["a"],StandardTable:s["a"],WangEditor:p["a"],UploadButton:u["a"],ColumnChildrenChoose:m["a"]},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var o,r,a,l,n,s,i,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$route.query.id){t.next=3;break}throw"页面不存在，请检查传入参数！";case 3:return o=e.$route.path.substring(0,e.$route.path.length-"/edit".length),r="/api"+o+"/grid_config",t.next=7,e.$api(r).method("GET").call();case 7:if(a=t.sent,a.status){t.next=10;break}throw a.msg;case 10:l=a.grid.edit,n=a.api,s={},i={},p=function(t){return e.$route.query[t]?e.$route.query[t]:""},l.columns.map((function(e){"COLUMN_CHECKBOX"===e.type||"COLUMN_PICTURES"===e.type||"COLUMN_FILES"===e.type||"COLUMN_CHOOSE"===e.type?s[e.col]=""!==p(e.col)?JSON.parse(p(e.col)):[]:"COLUMN_TIMESTAMP"===e.type?s[e.col]=""!==p(e.col)?p(e.col):c()():s[e.col]=p(e.col),"COLUMN_CHILDREN_CHOOSE"===e.type&&(i[e.col]="")})),e.id=e.$route.query.id,e.columns=l.columns,e.form=s,e.formTip=i,e.api=n,e.reset(),t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](0),e.$message.error("配置加载错误："+t.t0,5);case 27:case"end":return t.stop()}}),t,null,[[0,24]])})))()},methods:{openurl:function(e){if(e.startsWith("http"))return window.open(e);var t=e,o="";e.includes("?")&&(t=e.split("?")[0],o=e.split("?")[1]),t.endsWith("/create")?(e="/create?path="+t.substring(0,t.length-"/create".length),""!=o&&(e+="&"+o)):t.endsWith("/edit")?(e="/edit?path="+t.substring(0,t.length-"/edit".length),""!=o&&(e+="&"+o)):t.endsWith("/list")&&(e="/list?path="+t.substring(0,t.length-"/list".length),""!=o&&(e+="&"+o)),this.$router.push(e)},reset:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$api(e.api.detail).method("GET").param({id:e.id}).call();case 3:if(o=t.sent,!o.status){t.next=8;break}for(r in e.columns)void 0!==o.data[e.columns[r].col]?"COLUMN_CHECKBOX"===e.columns[r].type||"COLUMN_PICTURES"===e.columns[r].type||"COLUMN_FILES"===e.columns[r].type||"COLUMN_CHOOSE"===e.columns[r].type?e.form[e.columns[r].col]=JSON.parse(o.data[e.columns[r].col]):"COLUMN_TIMESTAMP"===e.columns[r].type?e.form[e.columns[r].col]=c()(o.data[e.columns[r].col],"YYYY-MM-DD HH:mm:ss"):e.form[e.columns[r].col]=o.data[e.columns[r].col]+"":"COLUMN_CHECKBOX"===e.columns[r].type||"COLUMN_PICTURES"===e.columns[r].type||"COLUMN_FILES"===e.columns[r].type?e.form[e.columns[r].col]=""!==getQueryString(e.columns[r].col)?JSON.parse(getQueryString(e.columns[r].col)):[]:"COLUMN_TIMESTAMP"===e.columns[r].type?e.form[e.columns[r].col]=""!==getQueryString(e.columns[r].col)?getQueryString(e.columns[r].col):c()():e.form[e.columns[r].col]=getQueryString(e.columns[r].col),"COLUMN_CHILDREN_CHOOSE"===e.columns[r].type&&(o.tip[e.columns[r].col]?e.formTip[e.columns[r].col]=o.tip[e.columns[r].col][e.columns[r].extra.displayColumn]:e.formTip[e.columns[r].col]="");t.next=9;break;case 8:throw o.msg;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$message.error(t.t0+"",5);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r in o={},e.columns.map((function(t){"COLUMN_DISPLAY"!==t.type&&(o[t.col]=e.form[t.col])})),o)o[r]instanceof c.a&&(o[r]=o[r].format("YYYY-MM-DD HH:mm:ss")),o[r]instanceof Array&&(o[r]=JSON.stringify(o[r]));return t.prev=3,t.next=6,e.$api(e.api.save).method("POST").param(o).call();case 6:if(a=t.sent,!a.status){t.next=14;break}e.$message.success(a.msg,5),e.reset(),e.$closePage(e.$route.path),e.$router.go(-1),t.next=15;break;case 14:throw a.msg;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),e.$message.error(t.t0+"",5);case 20:case"end":return t.stop()}}),t,null,[[3,17]])})))()}}},d=f,_=(o("6f4c"),o("2877")),b=Object(_["a"])(d,r,a,!1,null,"96a5365e",null);t["default"]=b.exports},e63a:function(e,t,o){}}]);