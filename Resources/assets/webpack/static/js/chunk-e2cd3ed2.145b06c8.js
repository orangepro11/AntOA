(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e2cd3ed2"],{"129a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{staticClass:"confirm",attrs:{title:e.title},on:{ok:e.onConfirmTip},model:{value:e.isTipShow,callback:function(t){e.isTipShow=t},expression:"isTipShow"}},[a("center",[e._v(e._s(e.confirmText))]),e.prompt_tip?a("a-form-item",{attrs:{label:e.prompt_tip,wrapperCol:{span:10},labelCol:{span:7}}},[a("a-input",{attrs:{placeholder:e.prompt_tip_placeholder},model:{value:e.prompt_text,callback:function(t){e.prompt_text=t},expression:"prompt_text"}})],1):e._e()],1)},r=[],o=(a("d3b7"),{name:"ConfirmDialog",data:function(){return{isTipShow:!1,title:"提示",confirmText:"",onConfirmTip:function(){},prompt_text:"",prompt_tip:!1}},methods:{confirm:function(e,t,a,n){var r=this;return this.prompt_text="",this.prompt_tip=a||"",this.prompt_tip_placeholder=n||"",new Promise((function(a){r.isTipShow=!0,r.title=t||"提示",r.confirmText=e,r.onConfirmTip=function(){r.isTipShow=!1,a(r.prompt_text)}}))}}}),s=o,i=a("2877"),c=Object(i["a"])(s,n,r,!1,null,null,null);t["a"]=c.exports},3287:function(e,t,a){},3521:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"standard-table"},[a("div",{staticClass:"alert"},[e.selectedRows?a("a-alert",{attrs:{type:"info","show-icon":!0}},[a("div",{staticClass:"message",attrs:{slot:"message"},slot:"message"},[e._v(" 已选择 "),a("a",[e._v(e._s(e.selectedRows.length))]),e._v(" 项 "),a("a",{staticClass:"clear",on:{click:e.onClear}},[e._v("清空")]),e._l(e.needTotalList,(function(t,n){return[t.needTotal?a("div",{key:n},[e._v(" "+e._s(t.title)+"总计  "),a("a",[e._v(e._s(t.customRender?t.customRender(t.total):t.total))])]):e._e()]}))],2)]):e._e()],1),a("a-table",{attrs:{bordered:e.bordered,loading:e.loading,columns:e.columns,dataSource:e.dataSource,rowKey:e.rowKey,pagination:e.pagination,expandedRowKeys:e.expandedRowKeys,expandedRowRender:e.expandedRowRender,rowSelection:e.selectedRows?{selectedRowKeys:e.selectedRowKeys,onChange:e.updateSelect}:void 0},on:{change:e.onChange},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(a,n,r){return[e._t(t,null,null,{text:a,record:n,index:r})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,a,n,r){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:a,indent:n,expanded:r})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return a("template",{slot:t},[e._t(t)],2)}))],2)],1)},r=[],o=a("c1f7"),s=o["a"],i=(a("e3dd"),a("2877")),c=Object(i["a"])(s,n,r,!1,null,"4061044e",null);t["a"]=c.exports},6822:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[null!=e.tableObj?a("a-card",[a("div",[a("a-row",[e._l(e.tableObj.filter_columns,(function(t,n){return a("a-col",{key:n,attrs:{md:12,sm:24}},["FILTER_ENUM"==t.type?a("a-row",{staticClass:"antoa-list-filter-item"},[a("a-col",{attrs:{span:8}},[a("div",{staticClass:"antoa-list-filter-label"},[e._v(" "+e._s(t.tip)+" ")])]),a("a-col",{attrs:{span:16}},[a("a-select",{attrs:{placeholder:"请选择"+t.tip},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.searchObj[t.col],callback:function(a){e.$set(e.searchObj,t.col,a)},expression:"searchObj[filterItem.col]"}},[a("a-select-option",{attrs:{value:""}},[e._v("不筛选")]),e._l(t.extra,(function(n,r){return a("a-select-option",{key:r,attrs:{value:"col"}},[e._v(" "+e._s(t[n])+" ")])}))],2)],1)],1):e._e(),"FILTER_STARTTIME"==t.type||"FILTER_ENDTIME"==t.type?a("a-row",{staticClass:"antoa-list-filter-item"},[a("a-col",{staticClass:"antoa-list-filter-label",attrs:{span:8}},[a("div",{staticClass:"antoa-list-filter-label"},[e._v(" "+e._s(t.tip)+" ")])]),a("a-col",{attrs:{span:16}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD hh:mm:ss",placeholder:"请选择"+t.tip},on:{panelChange:function(t){return e.$forceUpdate()}},model:{value:e.searchObj[t.col+("FILTER_STARTTIME"==t.type?"_starttime":"_endtime")],callback:function(a){e.$set(e.searchObj,t.col+("FILTER_STARTTIME"==t.type?"_starttime":"_endtime"),a)},expression:"searchObj[filterItem.col + (filterItem.type == 'FILTER_STARTTIME' ? '_starttime' : '_endtime')]"}})],1)],1):e._e(),"FILTER_TEXT"==t.type?a("a-row",{staticClass:"antoa-list-filter-item"},[a("a-col",{staticClass:"antoa-list-filter-label",attrs:{span:8}},[a("div",{staticClass:"antoa-list-filter-label"},[e._v(" "+e._s(t.tip)+" ")])]),a("a-col",{attrs:{span:16}},[a("a-input",{attrs:{placeholder:"请填写"+t.tip},model:{value:e.searchObj[t.col],callback:function(a){e.$set(e.searchObj,t.col,a)},expression:"searchObj[filterItem.col]"}})],1)],1):e._e()],1)})),a("span",{staticStyle:{float:"right","margin-top":"3px"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.doSearch}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.resetSearch}},[e._v("重置")])],1)],2)],1),a("div",[a("a-space",{staticClass:"antoa-list-operator"},[e.tableObj.hasCreate?a("a-button",{attrs:{type:"primary"},on:{click:e.onAddClick}},[e._v("创建")]):e._e(),e._l(e.tableObj.header_buttons,(function(t,n){return a("a-button",{key:n,attrs:{type:t.type},on:{click:function(a){return e.onHeaderButtonClick(t)}}},[e._v(" "+e._s(t.title)+" ")])}))],2),a("div",{staticStyle:{"margin-bottom":"16px"}},[a("a-alert",{attrs:{type:"info","show-icon":!0}},[a("div",{staticClass:"message",attrs:{slot:"message"},slot:"message"},[e._v(" 共计 "),a("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.pagination.total))]),e._v(" 行 "+e._s(e.statics)+" ")])])],1),a("standard-table",{attrs:{columns:e.columns,"data-source":e.dataSource,"selected-rows":e.selectedRows,pagination:e.pagination,"row-key":e.columns[0].dataIndex},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t},change:e.onDataChange},scopedSlots:e._u([e._l(e.templates,(function(t){return{key:t.col,fn:function(n){n.text;var r=n.record;return["ENUM"==t.type?a("div",[a("div",[e._v(e._s(t.extra[r[t.col]+""]))])]):e._e(),"RICH_TEXT"==t.type?a("div",[a("div",{domProps:{innerHTML:e._s(r[t.col])}})]):e._e(),"PICTURE"==t.type?a("div",[a("div",[a("img",{style:t.extra,attrs:{src:r[t.col]}})])]):e._e()]}}})),{key:"action",fn:function(t){t.text;var n=t.record;return a("div",{},[e.tableObj.hasEdit?a("a-button",{staticStyle:{margin:"5px"},attrs:{type:"primary"},on:{click:function(t){return e.onEditClick(n[e.columns[0].dataIndex])}}},[e._v(" 编辑 ")]):e._e(),e.tableObj.hasDelete?a("a-button",{staticStyle:{margin:"5px"},attrs:{type:"danger"},on:{click:function(t){return e.onDeleteClick(n[e.columns[0].dataIndex])}}},[e._v("删除 ")]):e._e(),e._l(e.tableObj.row_buttons,(function(t,r){return a("a-button",{key:r,staticStyle:{margin:"5px"},attrs:{type:t.type},on:{click:function(a){return e.onRowButtonClick(t,n,n[e.columns[0].dataIndex])}}},[e._v(" "+e._s(t.title)+" ")])}))],2)}}],null,!0)})],1),a("confirm-dialog",{ref:"confirmDialog"})],1):e._e()],1)},r=[],o=a("1da1"),s=(a("96cf"),a("99af"),a("d81d"),a("4de4"),a("2ca0"),a("caad"),a("2532"),a("c1df")),i=a.n(s),c=a("3521"),l=a("129a"),_={data:function(){return{tableObj:null,columns:null,searchObj:null,api:null,templates:null,statics:"",dataSource:[],selectedRows:[],pagination:{current:1,total:0,pageSize:15}}},components:{StandardTable:c["a"],confirmDialog:l["a"]},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=e.$route.path.substring(0,e.$route.path.length-"/list".length),n="/api"+a+"/grid_config",t.next=5,e.$api(n).method("GET").call();case 5:if(r=t.sent,r.status){t.next=8;break}throw r.msg;case 8:o=r.grid.list,s=r.api,e.columns=o.columns.map((function(e){return"TEXT"===e.type?{title:e.tip,dataIndex:e.col}:{title:e.tip,scopedSlots:{customRender:e.col}}})).concat([{title:"操作",scopedSlots:{customRender:"action"}}]),e.templates=o.columns.filter((function(e){return"TEXT"!==e.type})),i={},o.filter_columns.map((function(t){return"FILTER_STARTTIME"===t.type?i[t.col+"_starttime"]=e.$route.query[t.col+"_starttime"]?e.$route.query[t.col+"_starttime"]:"":"FILTER_ENDTIME"===t.type?i[t.col+"_endtime"]=e.$route.query[t.col+"_endtime"]?e.$route.query[t.col+"_endtime"]:"":i[t.col]=e.$route.query[t.col]?e.$route.query[t.col]:""})),e.searchObj=i,e.api=s,e.tableObj=o,e.loadPage(),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](0),e.$message.error("配置加载错误："+t.t0,5);case 23:case"end":return t.stop()}}),t,null,[[0,20]])})))()},methods:{onShow:function(){this.loadPage()},openurl:function(e){if(e.startsWith("http"))return window.open(e);this.$router.push(e)},doSearch:function(){return this.loadPage()},resetSearch:function(){for(var e in this.searchObj)this.searchObj[e]=""},onDataChange:function(e){this.pagination=e,this.loadPage()},loadPage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n in a={},Object.assign(a,e.searchObj,{page:e.pagination.current}),a)a[n]instanceof i.a&&(a[n]=a[n].format("YYYY-MM-DD hh:mm:ss")),null!==a[n]&&void 0!==a[n]||(a[n]="");return t.next=5,e.$api(e.api.list).method("POST").param(a).call();case 5:r=t.sent,e.pagination.total=r.total,e.pagination.pageSize=r.per_page,e.dataSource=r.data,e.statics=r.statics;case 10:case"end":return t.stop()}}),t)})))()},onAddClick:function(){this.openurl(this.api.create_page)},onEditClick:function(e){this.openurl(this.api.edit_page+"?id="+e)},onDeleteClick:function(e){var t=this;this.$refs.confirmDialog.confirm("确认要删除这条记录么？").then(Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api(t.api.delete).method("GET").param({id:e}).call();case 2:n=a.sent,n.status?(t.$message.success(n.data,5),t.loadPage()):t.$message.error(n.msg,5);case 4:case"end":return a.stop()}}),a)}))))},onHeaderButtonClick:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(r in n={},Object.assign(n,t.searchObj,{page:t.pagination.current}),n)n[r]instanceof i.a&&(n[r]=n[r].format("YYYY-MM-DD hh:mm:ss"));if("api"!==e.btn_do_type){a.next=11;break}return a.next=6,t.$api(e.url).method("POST").param(n).call();case 6:s=a.sent,s.status?t.$message.success(s.data):t.$message.error(s.msg),t.loadPage(),a.next=12;break;case 11:"api_confirm"===e.btn_do_type?t.$refs.confirmDialog.confirm("确认要这样做么？").then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api(e.url).method("POST").param(n).call();case 2:r=a.sent,r.status?t.$message.success(r.data):t.$message.error(r.msg),t.loadPage();case 5:case"end":return a.stop()}}),a)})))):"navigate"===e.btn_do_type&&t.openurl(e.url);case 12:case"end":return a.stop()}}),a)})))()},onRowButtonClick:function(e,t,a){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("api"!==e.btn_do_type){t.next=8;break}return t.next=3,n.$api(e.url).method("GET").param({id:a}).call();case 3:r=t.sent,r.status?n.$message.success(r.data):n.$message.error(r.msg),n.loadPage(),t.next=9;break;case 8:"api_confirm"===e.btn_do_type?n.$refs.confirmDialog.confirm("确认要这样做么？").then(Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.$api(e.url).method("GET").param({id:a}).call();case 2:r=t.sent,r.status?n.$message.success(r.data):n.$message.error(r.msg),n.loadPage();case 5:case"end":return t.stop()}}),t)})))):"navigate"===e.btn_do_type&&(e.url.includes("?")?n.openurl(e.url+"&id="+a):n.openurl(e.url+"?id="+a));case 9:case"end":return t.stop()}}),t)})))()}}},u=_,d=(a("7927"),a("2877")),p=Object(d["a"])(u,n,r,!1,null,"5a0e3824",null);t["default"]=p.exports},7927:function(e,t,a){"use strict";a("f7da")},c1f7:function(module,__webpack_exports__,__webpack_require__){"use strict";var C_Users_wolves_Desktop_soft_shengxinyustudio_com_Modules_AntOA_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("5530"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d81d"),core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_map_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4de4"),core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_filter_js__WEBPACK_IMPORTED_MODULE_2__);__webpack_exports__["a"]={name:"StandardTable",props:{bordered:Boolean,loading:[Boolean,Object],columns:Array,dataSource:Array,rowKey:{type:[String,Function],default:"key"},pagination:{type:[Object,Boolean],default:!0},selectedRows:Array,expandedRowKeys:Array,expandedRowRender:Function},data:function(){return{needTotalList:[]}},methods:{updateSelect:function(e,t){this.$emit("update:selectedRows",t),this.$emit("selectedRowChange",e,t)},initTotalList:function(e){var t=e.filter((function(e){return e.needTotal})).map((function(e){return Object(C_Users_wolves_Desktop_soft_shengxinyustudio_com_Modules_AntOA_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(C_Users_wolves_Desktop_soft_shengxinyustudio_com_Modules_AntOA_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},e),{},{total:0})}));return t},onClear:function(){this.updateSelect([],[]),this.$emit("clear")},onChange:function(e,t,a,n){var r=n.currentDataSource;this.$emit("change",e,t,a,{currentDataSource:r})}},created:function(){this.needTotalList=this.initTotalList(this.columns)},watch:{selectedRows:function selectedRows(_selectedRows){this.needTotalList=this.needTotalList.map((function(item){return Object(C_Users_wolves_Desktop_soft_shengxinyustudio_com_Modules_AntOA_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])(Object(C_Users_wolves_Desktop_soft_shengxinyustudio_com_Modules_AntOA_frontend_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__["a"])({},item),{},{total:_selectedRows.reduce((function(sum,val){var v;try{v=val[item.dataIndex]?val[item.dataIndex]:eval("val.".concat(item.dataIndex))}catch(_){v=val[item.dataIndex]}return v=isNaN(parseFloat(v))?0:parseFloat(v),sum+v}),0)})}))}},computed:{selectedRowKeys:function(){var e=this;return this.selectedRows.map((function(t){return"function"===typeof e.rowKey?e.rowKey(t):t[e.rowKey]}))}}}},e3dd:function(e,t,a){"use strict";a("3287")},f7da:function(e,t,a){}}]);